syntax = "proto3";

package banking;

// Banking RPC service matching the aiozmq interface
service BankingService {
  // Send a banking command (JSON string) and receive response (CommandResult)
  rpc RunCommand(CommandRequest) returns (CommandResult);
  
  // Send a raft message and receive response
  rpc RaftMessage(RaftRequest) returns (RaftResponse);
}

// Request message for banking commands
message CommandRequest {
  string command = 1;  // JSON-encoded command
}

// Request message for raft messages
message RaftRequest {
  string message = 1;  // Raft message content
}

// Response message for raft messages
message RaftResponse {
  string result = 1;   // Raft response content
}
// CommandResult message matching raftengine.api.deck_api.CommandResult
message CommandResult {
  string command = 1;        // sent command	
  string error = 2;          // Error message if any
  bool redirect = 3;         // Whether to redirect to leader
  bool retry = 4;            // Whether to retry the operation
  string result = 5;          // Serialized result data
}
