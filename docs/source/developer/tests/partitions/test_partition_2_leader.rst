.. _test_partition_2_leader:

=======================================================
Test test_partition_2_leader from file test_partition_1
=======================================================


    Tests that the correct state results when a network partitions and leaves the leader
    isolated from the majority of the cluster nodes, and then rejoins the majority network.

    This is verified by completing an election, and running a state machine command to
    establish replicated state.

    Then the leader is partitioned, then a new election is held. After completing the election,
    a new state machine command is executed, which should succeed because the
    new leader has a quorum.

    After that log record is replicated, the old leader is allowed to rejoin the majority network.

    The old leader is prodded to send out a heartbeat. This will get rejections and the old
    leader should notice the new term in the responses. When it does, it will resign.

    Finally a heartbeat sequence is executed so that the old leader sees then new
    log state from the new leader, and it will tell the leader to catch it up with
    an additional append_entries message.

    When all that is done, the state machine state at the old leader should match the replicated
    state in the other nodes.
    
    Timers are disabled, so all timer driven operations such as heartbeats are manually triggered.
    

Section 1: Normal election
==========================




.. collapse:: section 1 trace table (click to toggle view)

   - See :ref:`Trace Table Legend` for help interpreting table contents

   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | N-1  | N-1                         | N-1       | N-2  | N-2                         | N-2       | N-3  | N-3                         | N-3       |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | Role | Op                          | Delta     | Role | Op                          | Delta     | Role | Op                          | Delta     |
   +======+=============================+===========+======+=============================+===========+======+=============================+===========+
   | CNDI | NEW ROLE                    |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | p_v_r+N-2 t-1 li-0 lt-0     |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | p_v_r+N-3 t-1 li-0 lt-0     |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR | N-1+p_v_r t-1 li-0 lt-0     |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR | p_v+N-1 yes-True            |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR |                             |           | FLWR | N-1+p_v_r t-1 li-0 lt-0     |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR |                             |           | FLWR | p_v+N-1 yes-True            |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | N-2+p_v yes-True            | t-1       | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | poll+N-2 t-1 li-0 lt-1      |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | poll+N-3 t-1 li-0 lt-1      |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | N-3+p_v yes-True            |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR | N-1+poll t-1 li-0 lt-1      | t-1       | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR | vote+N-1 yes-True           |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR |                             |           | FLWR | N-1+poll t-1 li-0 lt-1      | t-1       |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR |                             |           | FLWR | vote+N-1 yes-True           |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | N-2+vote yes-True           | lt-1 li-1 | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | NEW ROLE                    |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | ae+N-2 t-1 i-0 lt-0 e-1 c-0 |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | ae+N-3 t-1 i-0 lt-0 e-1 c-0 |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | N-3+vote yes-True           |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |                             |           | FLWR | N-1+ae t-1 i-0 lt-0 e-1 c-0 | lt-1 li-1 | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |                             |           | FLWR | N-2+ae_reply ok-True mi-1   |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |                             |           | FLWR |                             |           | FLWR | N-1+ae t-1 i-0 lt-0 e-1 c-0 | lt-1 li-1 |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |                             |           | FLWR |                             |           | FLWR | N-3+ae_reply ok-True mi-1   |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | N-2+ae_reply ok-True mi-1   | ci-1      | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | N-3+ae_reply ok-True mi-1   |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+



.. collapse:: trace sequence diagram (click to toggle view)

   .. plantuml:: /developer/tests/diagrams/test_partition_1/test_partition_2_leader_1.puml
          :scale: 100%


Section 2: Election complete, running a command 
================================================




.. collapse:: section 2 trace table (click to toggle view)

   - See :ref:`Trace Table Legend` for help interpreting table contents

   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | N-1  | N-1                         | N-1   | N-2  | N-2                         | N-2   | N-3  | N-3                         | N-3   |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | Role | Op                          | Delta | Role | Op                          | Delta | Role | Op                          | Delta |
   +======+=============================+=======+======+=============================+=======+======+=============================+=======+
   | LEAD | CMD START                   |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | ae+N-2 t-1 i-1 lt-1 e-1 c-1 | li-2  | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | ae+N-3 t-1 i-1 lt-1 e-1 c-1 |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR | N-1+ae t-1 i-1 lt-1 e-1 c-1 | li-2  | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR | N-2+ae_reply ok-True mi-2   |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |                             |       | FLWR | N-1+ae t-1 i-1 lt-1 e-1 c-1 | li-2  |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |                             |       | FLWR | N-3+ae_reply ok-True mi-2   |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-2+ae_reply ok-True mi-2   | ci-2  | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-3+ae_reply ok-True mi-2   |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR | N-1+ae t-1 i-2 lt-1 e-0 c-2 | ci-2  | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |                             |       | FLWR | N-1+ae t-1 i-2 lt-1 e-0 c-2 | ci-2  |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | CMD DONE                    |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+



.. collapse:: trace sequence diagram (click to toggle view)

   .. plantuml:: /developer/tests/diagrams/test_partition_1/test_partition_2_leader_2.puml
          :scale: 100%


Section 4: Holding new election, node 2 will win 
=================================================




.. collapse:: section 4 trace table (click to toggle view)

   - See :ref:`Trace Table Legend` for help interpreting table contents

   +------+-----+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | N-1  | N-1 | N-1   | N-2  | N-2                         | N-2       | N-3  | N-3                         | N-3       |
   +------+-----+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | Role | Op  | Delta | Role | Op                          | Delta     | Role | Op                          | Delta     |
   +======+=====+=======+======+=============================+===========+======+=============================+===========+
   | LEAD |     |       | CNDI | NEW ROLE                    |           | FLWR |                             |           |
   +------+-----+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |     | n=2   | CNDI | p_v_r+N-3 t-2 li-2 lt-1     |           | FLWR |                             |           |
   +------+-----+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |     | n=2   | CNDI |                             |           | FLWR | N-2+p_v_r t-2 li-2 lt-1     |           |
   +------+-----+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |     | n=2   | CNDI |                             |           | FLWR | p_v+N-2 yes-True            |           |
   +------+-----+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |     | n=2   | CNDI | N-3+p_v yes-True            | t-2       | FLWR |                             |           |
   +------+-----+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |     | n=2   | CNDI | poll+N-3 t-2 li-2 lt-2      |           | FLWR |                             |           |
   +------+-----+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |     | n=2   | CNDI |                             |           | FLWR | N-2+poll t-2 li-2 lt-2      | t-2       |
   +------+-----+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |     | n=2   | CNDI |                             |           | FLWR | vote+N-2 yes-True           |           |
   +------+-----+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |     | n=2   | LEAD | N-3+vote yes-True           | lt-2 li-3 | FLWR |                             |           |
   +------+-----+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |     | n=2   | LEAD | NEW ROLE                    |           | FLWR |                             |           |
   +------+-----+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |     | n=2   | LEAD | ae+N-3 t-2 i-2 lt-1 e-1 c-2 |           | FLWR |                             |           |
   +------+-----+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |     | n=2   | LEAD |                             |           | FLWR | N-2+ae t-2 i-2 lt-1 e-1 c-2 | lt-2 li-3 |
   +------+-----+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |     | n=2   | LEAD |                             |           | FLWR | N-3+ae_reply ok-True mi-3   |           |
   +------+-----+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |     | n=2   | LEAD | N-3+ae_reply ok-True mi-3   | ci-3      | FLWR |                             |           |
   +------+-----+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+



.. collapse:: trace sequence diagram (click to toggle view)

   .. plantuml:: /developer/tests/diagrams/test_partition_1/test_partition_2_leader_4.puml
          :scale: 100%


Section 5: Both node 1 and node 2 think they are leaders, but only node 2 has a quorum, running command there 
==============================================================================================================




.. collapse:: section 5 trace table (click to toggle view)

   - See :ref:`Trace Table Legend` for help interpreting table contents

   +------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | N-1  | N-1 | N-1   | N-2  | N-2                         | N-2   | N-3  | N-3                         | N-3   |
   +------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | Role | Op  | Delta | Role | Op                          | Delta | Role | Op                          | Delta |
   +======+=====+=======+======+=============================+=======+======+=============================+=======+
   | LEAD |     |       | LEAD | CMD START                   |       | FLWR |                             |       |
   +------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |     | n=2   | LEAD | ae+N-3 t-2 i-3 lt-2 e-1 c-3 | li-4  | FLWR |                             |       |
   +------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |     | n=2   | LEAD |                             |       | FLWR | N-2+ae t-2 i-3 lt-2 e-1 c-3 | li-4  |
   +------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |     | n=2   | LEAD |                             |       | FLWR | N-3+ae_reply ok-True mi-4   |       |
   +------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |     | n=2   | LEAD | N-3+ae_reply ok-True mi-4   | ci-4  | FLWR |                             |       |
   +------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |     | n=2   | LEAD |                             |       | FLWR | N-2+ae t-2 i-4 lt-2 e-0 c-4 | ci-4  |
   +------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |     | n=2   | LEAD | CMD DONE                    |       | FLWR |                             |       |
   +------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |     | n=2   | LEAD |                             |       | FLWR | N-3+ae_reply ok-True mi-4   |       |
   +------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |     | n=2   | LEAD | N-3+ae_reply ok-True mi-4   |       | FLWR |                             |       |
   +------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+



.. collapse:: trace sequence diagram (click to toggle view)

   .. plantuml:: /developer/tests/diagrams/test_partition_1/test_partition_2_leader_5.puml
          :scale: 100%


Section 7: Sending heartbeats from old leader, should resign
============================================================




.. collapse:: section 7 trace table (click to toggle view)

   - See :ref:`Trace Table Legend` for help interpreting table contents

   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | N-1  | N-1                         | N-1   | N-2  | N-2                         | N-2   | N-3  | N-3                         | N-3   |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | Role | Op                          | Delta | Role | Op                          | Delta | Role | Op                          | Delta |
   +======+=============================+=======+======+=============================+=======+======+=============================+=======+
   | LEAD | ae+N-2 t-1 i-2 lt-1 e-0 c-2 |       | LEAD |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | LEAD | N-1+ae t-1 i-2 lt-1 e-0 c-2 |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | LEAD | N-2+ae_reply ok-False mi-4  |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR | N-2+ae_reply ok-False mi-4  | t-2   | LEAD |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR | NEW ROLE                    |       | LEAD |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR | ae+N-3 t-1 i-2 lt-1 e-0 c-2 |       | LEAD |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR |                             |       | LEAD |                             |       | FLWR | N-1+ae t-1 i-2 lt-1 e-0 c-2 |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR |                             |       | LEAD |                             |       | FLWR | N-3+ae_reply ok-False mi-4  |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR | N-3+ae_reply ok-False mi-4  |       | LEAD |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+



.. collapse:: trace sequence diagram (click to toggle view)

   .. plantuml:: /developer/tests/diagrams/test_partition_1/test_partition_2_leader_7.puml
          :scale: 100%


Section 8: Sending heartbeats from new leader, sould catch up old leader
========================================================================




.. collapse:: section 8 trace table (click to toggle view)

   - See :ref:`Trace Table Legend` for help interpreting table contents

   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+
   | N-1  | N-1                         | N-1            | N-2  | N-2                         | N-2   | N-3  | N-3                         | N-3   |
   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+
   | Role | Op                          | Delta          | Role | Op                          | Delta | Role | Op                          | Delta |
   +======+=============================+================+======+=============================+=======+======+=============================+=======+
   | FLWR |                             |                | LEAD | ae+N-1 t-2 i-4 lt-2 e-0 c-4 |       | FLWR |                             |       |
   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR | N-2+ae t-2 i-4 lt-2 e-0 c-4 |                | LEAD |                             |       | FLWR |                             |       |
   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR | N-1+ae_reply ok-False mi-2  |                | LEAD |                             |       | FLWR |                             |       |
   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR |                             |                | LEAD | N-1+ae_reply ok-False mi-2  |       | FLWR |                             |       |
   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR |                             |                | LEAD | ae+N-3 t-2 i-4 lt-2 e-0 c-4 |       | FLWR |                             |       |
   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR |                             |                | LEAD |                             |       | FLWR | N-2+ae t-2 i-4 lt-2 e-0 c-4 |       |
   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR |                             |                | LEAD |                             |       | FLWR | N-3+ae_reply ok-True mi-4   |       |
   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR |                             |                | LEAD | N-3+ae_reply ok-True mi-4   |       | FLWR |                             |       |
   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR |                             |                | LEAD | ae+N-1 t-2 i-2 lt-1 e-1 c-4 |       | FLWR |                             |       |
   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR | N-2+ae t-2 i-2 lt-1 e-1 c-4 | lt-2 li-3 ci-3 | LEAD |                             |       | FLWR |                             |       |
   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR | N-1+ae_reply ok-True mi-3   |                | LEAD |                             |       | FLWR |                             |       |
   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR |                             |                | LEAD | N-1+ae_reply ok-True mi-3   |       | FLWR |                             |       |
   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR |                             |                | LEAD | ae+N-1 t-2 i-3 lt-2 e-1 c-4 |       | FLWR |                             |       |
   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR | N-2+ae t-2 i-3 lt-2 e-1 c-4 | li-4 ci-4      | LEAD |                             |       | FLWR |                             |       |
   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR | N-1+ae_reply ok-True mi-4   |                | LEAD |                             |       | FLWR |                             |       |
   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+
   | FLWR |                             |                | LEAD | N-1+ae_reply ok-True mi-4   |       | FLWR |                             |       |
   +------+-----------------------------+----------------+------+-----------------------------+-------+------+-----------------------------+-------+



.. collapse:: trace sequence diagram (click to toggle view)

   .. plantuml:: /developer/tests/diagrams/test_partition_1/test_partition_2_leader_8.puml
          :scale: 100%


