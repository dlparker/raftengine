.. _test_partition_1:

================================================
Test test_partition_1 from file test_partition_1
================================================


    This is a basic test of network partitioning and recovery. Five nodes are
    started and brought into sync after and election. Then two nodes are
    configured to be on a different simulated network partition than the
    leader and two other nodes. This means that the leader still has a quorum
    and can continue to advance the log. So, the leader runs a couple of commands
    after partition and we check to see that the reachable nodes get updated
    properly. We also check that the unreachable ones don't, but that is more
    about testing the simulation rather than any raft feature.

    One these verifications are done, the isolated nodes are configured to rejoin
    the main network and the leader is prodded to do a heartbeat broadcast. Some
    fiddly simulation control bits are used to single step through the message
    delivery process so as to verify that each heartbeat message reaches
    the right target and the target does the correct state ops and encodes
    the right reply. The rejoined nodes should walk through the state changes
    until they have correctly replicated the leader's log and the simulation
    state machine's final state.

    Timers are disabled, so all timer driven operations such as heartbeats are manually triggered.
    

Section 1: Normal election
==========================




.. collapse:: section 1 trace table (click to toggle view)

   - See :ref:`Trace Table Legend` for help interpreting table contents

   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | N-1  | N-1                         | N-1       | N-2  | N-2                         | N-2       | N-3  | N-3                         | N-3       | N-4  | N-4                         | N-4       | N-5  | N-5                         | N-5       |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | Role | Op                          | Delta     | Role | Op                          | Delta     | Role | Op                          | Delta     | Role | Op                          | Delta     | Role | Op                          | Delta     |
   +======+=============================+===========+======+=============================+===========+======+=============================+===========+======+=============================+===========+======+=============================+===========+
   | CNDI | NEW ROLE                    |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | p_v_r+N-2 t-1 li-0 lt-0     |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | p_v_r+N-3 t-1 li-0 lt-0     |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | p_v_r+N-4 t-1 li-0 lt-0     |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | p_v_r+N-5 t-1 li-0 lt-0     |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR | N-1+p_v_r t-1 li-0 lt-0     |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR | p_v+N-1 yes-True            |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR |                             |           | FLWR | N-1+p_v_r t-1 li-0 lt-0     |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR |                             |           | FLWR | p_v+N-1 yes-True            |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR | N-1+p_v_r t-1 li-0 lt-0     |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR | p_v+N-1 yes-True            |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR | N-1+p_v_r t-1 li-0 lt-0     |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR | p_v+N-1 yes-True            |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | N-2+p_v yes-True            |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | N-3+p_v yes-True            | t-1       | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | poll+N-2 t-1 li-0 lt-1      |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | poll+N-3 t-1 li-0 lt-1      |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | poll+N-4 t-1 li-0 lt-1      |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | poll+N-5 t-1 li-0 lt-1      |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | N-4+p_v yes-True            |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | N-5+p_v yes-True            |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR | N-1+poll t-1 li-0 lt-1      | t-1       | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR | vote+N-1 yes-True           |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR |                             |           | FLWR | N-1+poll t-1 li-0 lt-1      | t-1       | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR |                             |           | FLWR | vote+N-1 yes-True           |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR | N-1+poll t-1 li-0 lt-1      | t-1       | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR | vote+N-1 yes-True           |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR | N-1+poll t-1 li-0 lt-1      | t-1       |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR | vote+N-1 yes-True           |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | CNDI | N-2+vote yes-True           |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | N-3+vote yes-True           | lt-1 li-1 | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | NEW ROLE                    |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | ae+N-2 t-1 i-0 lt-0 e-1 c-0 |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | ae+N-3 t-1 i-0 lt-0 e-1 c-0 |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | ae+N-4 t-1 i-0 lt-0 e-1 c-0 |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | ae+N-5 t-1 i-0 lt-0 e-1 c-0 |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | N-4+vote yes-True           |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | N-5+vote yes-True           |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |                             |           | FLWR | N-1+ae t-1 i-0 lt-0 e-1 c-0 | lt-1 li-1 | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |                             |           | FLWR | N-2+ae_reply ok-True mi-1   |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |                             |           | FLWR |                             |           | FLWR | N-1+ae t-1 i-0 lt-0 e-1 c-0 | lt-1 li-1 | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |                             |           | FLWR |                             |           | FLWR | N-3+ae_reply ok-True mi-1   |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR | N-1+ae t-1 i-0 lt-0 e-1 c-0 | lt-1 li-1 | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR | N-4+ae_reply ok-True mi-1   |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR | N-1+ae t-1 i-0 lt-0 e-1 c-0 | lt-1 li-1 |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR | N-5+ae_reply ok-True mi-1   |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | N-2+ae_reply ok-True mi-1   |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | N-3+ae_reply ok-True mi-1   | ci-1      | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | N-4+ae_reply ok-True mi-1   |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+
   | LEAD | N-5+ae_reply ok-True mi-1   |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           | FLWR |                             |           |
   +------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----------------------------+-----------+



.. collapse:: trace sequence diagram (click to toggle view)

   .. plantuml:: /developer/tests/diagrams/test_partition_1/test_partition_1_1.puml
          :scale: 100%


Section 2: Run one command, normal sequence till leader commit, check follower's final state
============================================================================================




.. collapse:: section 2 trace table (click to toggle view)

   - See :ref:`Trace Table Legend` for help interpreting table contents

   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | N-1  | N-1                         | N-1   | N-2  | N-2                         | N-2   | N-3  | N-3                         | N-3   | N-4  | N-4                         | N-4   | N-5  | N-5                         | N-5   |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | Role | Op                          | Delta | Role | Op                          | Delta | Role | Op                          | Delta | Role | Op                          | Delta | Role | Op                          | Delta |
   +======+=============================+=======+======+=============================+=======+======+=============================+=======+======+=============================+=======+======+=============================+=======+
   | LEAD | CMD START                   |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | ae+N-2 t-1 i-1 lt-1 e-1 c-1 | li-2  | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | ae+N-3 t-1 i-1 lt-1 e-1 c-1 |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | ae+N-4 t-1 i-1 lt-1 e-1 c-1 |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | ae+N-5 t-1 i-1 lt-1 e-1 c-1 |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR | N-1+ae t-1 i-1 lt-1 e-1 c-1 | li-2  | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR | N-2+ae_reply ok-True mi-2   |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |                             |       | FLWR | N-1+ae t-1 i-1 lt-1 e-1 c-1 | li-2  | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |                             |       | FLWR | N-3+ae_reply ok-True mi-2   |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR | N-1+ae t-1 i-1 lt-1 e-1 c-1 | li-2  | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR | N-4+ae_reply ok-True mi-2   |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR | N-1+ae t-1 i-1 lt-1 e-1 c-1 | li-2  |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR | N-5+ae_reply ok-True mi-2   |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-2+ae_reply ok-True mi-2   |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-3+ae_reply ok-True mi-2   | ci-2  | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-4+ae_reply ok-True mi-2   |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-5+ae_reply ok-True mi-2   |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR | N-1+ae t-1 i-2 lt-1 e-0 c-2 | ci-2  | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |                             |       | FLWR | N-1+ae t-1 i-2 lt-1 e-0 c-2 | ci-2  | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR | N-1+ae t-1 i-2 lt-1 e-0 c-2 | ci-2  | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR | N-1+ae t-1 i-2 lt-1 e-0 c-2 | ci-2  |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | CMD DONE                    |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR | N-2+ae_reply ok-True mi-2   |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |                             |       | FLWR | N-3+ae_reply ok-True mi-2   |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR | N-4+ae_reply ok-True mi-2   |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR | N-5+ae_reply ok-True mi-2   |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-2+ae_reply ok-True mi-2   |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-3+ae_reply ok-True mi-2   |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-4+ae_reply ok-True mi-2   |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-5+ae_reply ok-True mi-2   |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+------+-----------------------------+-------+



.. collapse:: trace sequence diagram (click to toggle view)

   .. plantuml:: /developer/tests/diagrams/test_partition_1/test_partition_1_2.puml
          :scale: 100%


Section 3: Partitioning the network to isolate nodes 2 and 3
============================================================




.. collapse:: section 3 trace table (click to toggle view)

   - See :ref:`Trace Table Legend` for help interpreting table contents

   +------+-----+-------+------+----------+-------+------+----------+-------+------+-----+-------+------+-----+-------+
   | N-1  | N-1 | N-1   | N-2  | N-2      | N-2   | N-3  | N-3      | N-3   | N-4  | N-4 | N-4   | N-5  | N-5 | N-5   |
   +------+-----+-------+------+----------+-------+------+----------+-------+------+-----+-------+------+-----+-------+
   | Role | Op  | Delta | Role | Op       | Delta | Role | Op       | Delta | Role | Op  | Delta | Role | Op  | Delta |
   +======+=====+=======+======+==========+=======+======+==========+=======+======+=====+=======+======+=====+=======+
   | LEAD |     |       | FLWR | NETSPLIT |       | FLWR |          |       | FLWR |     |       | FLWR |     |       |
   +------+-----+-------+------+----------+-------+------+----------+-------+------+-----+-------+------+-----+-------+
   | LEAD |     |       | FLWR |          | n=2   | FLWR | NETSPLIT | n=2   | FLWR |     |       | FLWR |     |       |
   +------+-----+-------+------+----------+-------+------+----------+-------+------+-----+-------+------+-----+-------+



.. collapse:: trace sequence diagram (click to toggle view)

   .. plantuml:: /developer/tests/diagrams/test_partition_1/test_partition_1_3.puml
          :scale: 100%


Section 4: Running two commands, only nodes 1, 4 and 5 should participate
=========================================================================




.. collapse:: section 4 trace table (click to toggle view)

   - See :ref:`Trace Table Legend` for help interpreting table contents

   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | N-1  | N-1                         | N-1   | N-2  | N-2 | N-2   | N-3  | N-3 | N-3   | N-4  | N-4                         | N-4   | N-5  | N-5                         | N-5   |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | Role | Op                          | Delta | Role | Op  | Delta | Role | Op  | Delta | Role | Op                          | Delta | Role | Op                          | Delta |
   +======+=============================+=======+======+=====+=======+======+=====+=======+======+=============================+=======+======+=============================+=======+
   | LEAD | CMD START                   |       | FLWR |     |       | FLWR |     |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | ae+N-4 t-1 i-2 lt-1 e-1 c-2 | li-3  | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | ae+N-5 t-1 i-2 lt-1 e-1 c-2 |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR | N-1+ae t-1 i-2 lt-1 e-1 c-2 | li-3  | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR | N-4+ae_reply ok-True mi-3   |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR | N-1+ae t-1 i-2 lt-1 e-1 c-2 | li-3  |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR | N-5+ae_reply ok-True mi-3   |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-4+ae_reply ok-True mi-3   |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-5+ae_reply ok-True mi-3   | ci-3  | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR | N-1+ae t-1 i-3 lt-1 e-0 c-3 | ci-3  | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR | N-1+ae t-1 i-3 lt-1 e-0 c-3 | ci-3  |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | CMD DONE                    |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR | N-4+ae_reply ok-True mi-3   |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR | N-5+ae_reply ok-True mi-3   |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-4+ae_reply ok-True mi-3   |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-5+ae_reply ok-True mi-3   |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | CMD START                   |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | ae+N-4 t-1 i-3 lt-1 e-1 c-3 | li-4  | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | ae+N-5 t-1 i-3 lt-1 e-1 c-3 |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR | N-1+ae t-1 i-3 lt-1 e-1 c-3 | li-4  | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR | N-4+ae_reply ok-True mi-4   |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR | N-1+ae t-1 i-3 lt-1 e-1 c-3 | li-4  |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR | N-5+ae_reply ok-True mi-4   |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-4+ae_reply ok-True mi-4   |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-5+ae_reply ok-True mi-4   | ci-4  | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR | N-1+ae t-1 i-4 lt-1 e-0 c-4 | ci-4  | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR | N-1+ae t-1 i-4 lt-1 e-0 c-4 | ci-4  |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | CMD DONE                    |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR | N-4+ae_reply ok-True mi-4   |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR | N-5+ae_reply ok-True mi-4   |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-4+ae_reply ok-True mi-4   |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-5+ae_reply ok-True mi-4   |       | FLWR |     | n=2   | FLWR |     | n=2   | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+-----+-------+------+-----+-------+------+-----------------------------+-------+------+-----------------------------+-------+



.. collapse:: trace sequence diagram (click to toggle view)

   .. plantuml:: /developer/tests/diagrams/test_partition_1/test_partition_1_4.puml
          :scale: 100%


Section 5: Healing network, nodes 2 and 3 will now be reachable from leader node 1, sending heartbeats
======================================================================================================




.. collapse:: section 5 trace table (click to toggle view)

   - See :ref:`Trace Table Legend` for help interpreting table contents

   +------+-----------------------------+-------+------+---------+-------+------+---------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | N-1  | N-1                         | N-1   | N-2  | N-2     | N-2   | N-3  | N-3     | N-3   | N-4  | N-4                         | N-4   | N-5  | N-5                         | N-5   |
   +------+-----------------------------+-------+------+---------+-------+------+---------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | Role | Op                          | Delta | Role | Op      | Delta | Role | Op      | Delta | Role | Op                          | Delta | Role | Op                          | Delta |
   +======+=============================+=======+======+=========+=======+======+=========+=======+======+=============================+=======+======+=============================+=======+
   | LEAD |                             |       | FLWR | NETJOIN | n=1   | FLWR |         |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+---------+-------+------+---------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |         |       | FLWR | NETJOIN | n=1   | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+---------+-------+------+---------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | ae+N-2 t-1 i-4 lt-1 e-0 c-4 |       | FLWR |         |       | FLWR |         |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+---------+-------+------+---------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | ae+N-3 t-1 i-4 lt-1 e-0 c-4 |       | FLWR |         |       | FLWR |         |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+---------+-------+------+---------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | ae+N-4 t-1 i-4 lt-1 e-0 c-4 |       | FLWR |         |       | FLWR |         |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+---------+-------+------+---------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | ae+N-5 t-1 i-4 lt-1 e-0 c-4 |       | FLWR |         |       | FLWR |         |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+---------+-------+------+---------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |         |       | FLWR |         |       | FLWR | N-1+ae t-1 i-4 lt-1 e-0 c-4 |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+---------+-------+------+---------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |         |       | FLWR |         |       | FLWR | N-4+ae_reply ok-True mi-4   |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+---------+-------+------+---------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |         |       | FLWR |         |       | FLWR |                             |       | FLWR | N-1+ae t-1 i-4 lt-1 e-0 c-4 |       |
   +------+-----------------------------+-------+------+---------+-------+------+---------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD |                             |       | FLWR |         |       | FLWR |         |       | FLWR |                             |       | FLWR | N-5+ae_reply ok-True mi-4   |       |
   +------+-----------------------------+-------+------+---------+-------+------+---------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-4+ae_reply ok-True mi-4   |       | FLWR |         |       | FLWR |         |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+---------+-------+------+---------+-------+------+-----------------------------+-------+------+-----------------------------+-------+
   | LEAD | N-5+ae_reply ok-True mi-4   |       | FLWR |         |       | FLWR |         |       | FLWR |                             |       | FLWR |                             |       |
   +------+-----------------------------+-------+------+---------+-------+------+---------+-------+------+-----------------------------+-------+------+-----------------------------+-------+



.. collapse:: trace sequence diagram (click to toggle view)

   .. plantuml:: /developer/tests/diagrams/test_partition_1/test_partition_1_5.puml
          :scale: 100%


Section 6: Nodes 4 and 5 have processed heartbeats, now nodes 2 and 3 should do so
==================================================================================




.. collapse:: section 6 trace table (click to toggle view)

   - See :ref:`Trace Table Legend` for help interpreting table contents

   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | N-1  | N-1                         | N-1   | N-2  | N-2                         | N-2       | N-3  | N-3                         | N-3       | N-4  | N-4 | N-4   | N-5  | N-5 | N-5   |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | Role | Op                          | Delta | Role | Op                          | Delta     | Role | Op                          | Delta     | Role | Op  | Delta | Role | Op  | Delta |
   +======+=============================+=======+======+=============================+===========+======+=============================+===========+======+=====+=======+======+=====+=======+
   | LEAD |                             |       | FLWR | N-1+ae t-1 i-4 lt-1 e-0 c-4 |           | FLWR |                             |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD |                             |       | FLWR | N-2+ae_reply ok-False mi-2  |           | FLWR |                             |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD | N-2+ae_reply ok-False mi-2  |       | FLWR |                             |           | FLWR |                             |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD | ae+N-2 t-1 i-2 lt-1 e-1 c-4 |       | FLWR |                             |           | FLWR |                             |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD |                             |       | FLWR | N-1+ae t-1 i-2 lt-1 e-1 c-4 | li-3 ci-3 | FLWR |                             |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD |                             |       | FLWR | N-2+ae_reply ok-True mi-3   |           | FLWR |                             |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD | N-2+ae_reply ok-True mi-3   |       | FLWR |                             |           | FLWR |                             |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD | ae+N-2 t-1 i-3 lt-1 e-1 c-4 |       | FLWR |                             |           | FLWR |                             |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD |                             |       | FLWR | N-1+ae t-1 i-3 lt-1 e-1 c-4 | li-4 ci-4 | FLWR |                             |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD |                             |       | FLWR | N-2+ae_reply ok-True mi-4   |           | FLWR |                             |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD | N-2+ae_reply ok-True mi-4   |       | FLWR |                             |           | FLWR |                             |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD |                             |       | FLWR |                             |           | FLWR | N-1+ae t-1 i-4 lt-1 e-0 c-4 |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD |                             |       | FLWR |                             |           | FLWR | N-3+ae_reply ok-False mi-2  |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD | N-3+ae_reply ok-False mi-2  |       | FLWR |                             |           | FLWR |                             |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD | ae+N-3 t-1 i-2 lt-1 e-1 c-4 |       | FLWR |                             |           | FLWR |                             |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD |                             |       | FLWR |                             |           | FLWR | N-1+ae t-1 i-2 lt-1 e-1 c-4 | li-3 ci-3 | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD |                             |       | FLWR |                             |           | FLWR | N-3+ae_reply ok-True mi-3   |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD | N-3+ae_reply ok-True mi-3   |       | FLWR |                             |           | FLWR |                             |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD | ae+N-3 t-1 i-3 lt-1 e-1 c-4 |       | FLWR |                             |           | FLWR |                             |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD |                             |       | FLWR |                             |           | FLWR | N-1+ae t-1 i-3 lt-1 e-1 c-4 | li-4 ci-4 | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD |                             |       | FLWR |                             |           | FLWR | N-3+ae_reply ok-True mi-4   |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+
   | LEAD | N-3+ae_reply ok-True mi-4   |       | FLWR |                             |           | FLWR |                             |           | FLWR |     |       | FLWR |     |       |
   +------+-----------------------------+-------+------+-----------------------------+-----------+------+-----------------------------+-----------+------+-----+-------+------+-----+-------+



.. collapse:: trace sequence diagram (click to toggle view)

   .. plantuml:: /developer/tests/diagrams/test_partition_1/test_partition_1_6.puml
          :scale: 100%


